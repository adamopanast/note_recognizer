<!DOCTYPE html>
<html>
    <head>
        <title>Note Recognizer v1.3</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="//code.jquery.com/jquery-1.10.2.js"></script>
        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
        <script type="text/javascript" src="./js/jquery.doubleScroll.js"></script>
        <script type="text/javascript" src="./js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="./css/thesis.css" />
        <script type="text/javascript" src="./js/complex.js"></script> <!--library for complex numbers-->
        <script language="javascript" src="./js/dsp.js/examples/js/processing.js"></script>
        <script language="javascript" src="./js/dsp.js/examples/js/init.js"></script>
        <script type="text/javascript" src="./js/dsp.js/dsp.js"></script>
        <script type="text/javascript" src="./js/vexflow-master/releases/vexflow-min.js"></script>
        <script type="text/javascript" src="./js/thesis/ui.js"></script>
        <script type="text/javascript" src="./js/thesis/constructor.js"></script>
        <script type="text/javascript" src="./js/thesis/objects.js"></script>
        <script type="text/javascript" src="./js/thesis/actions.js"></script>
        <script type="text/javascript" src="./js/thesis/onset_detector.js"></script>
        <script type="text/javascript" src="./js/thesis/timer.js"></script>
        <script type="text/javascript" src="./js/thesis/drawer.js"></script>
        <script type="text/javascript" src="./js/thesis/pitch_detector.js"></script>
        <script type="text/javascript" src="./js/thesis/web_audio_nodes.js"></script>
        <script type="text/javascript" src="./js/thesis/initializer.js"></script>
        <script>
            window.onload = function () {
                initializer.basic();
                detectorElem = document.getElementById("detector");
                canvasElem = document.getElementById("output");
                pitchElem = document.getElementById("pitch");
                noteElem = document.getElementById("note");
                detuneElem = document.getElementById("detune");
                detuneAmount = document.getElementById("detune_amt");
            };
        </script>
    </head>
    <body>

        <div class="controls">
            <div id="select-instrument">
                <label>Select Instrument</label>
                <select name="instrumentSelection" id="instrumentSelection" onchange="audioUsher.applyInstrumentPresets(this.value);">
                    <option value="piano">Piano</option>
                    <option value="guitar">Guitar</option>
                    <option value="violin">Violin</option>
                    <option value="viola">Viola</option>
                    <option value="cello">Cello</option>
                    <option value="bass">Bass</option>
                    <option value="harp">Harp</option>
                    <option value="trumpet">Trumpet</option>
                    <option value="tenorTrombone">Tenor Trombone</option>
                    <option value="bassTrombone">Bass Trombone</option>
                    <option value="frenchHorn">French Horn</option>
                    <option value="tuba">Tuba</option>
                    <option value="piccolo">Piccolo</option>
                    <option value="flute">Flute</option>
                    <option value="oboe">Oboe</option>
                    <option value="clarinet">Clarinet</option>
                    <option value="altoSax">Alto Sax</option>
                    <option value="tenorSax">Tenor Sax</option>
                    <option value="bassoon">Bassoon</option>
                    <option value="constraBassoon">Contrabassoon</option>
                    <option value="male">Male Vocals</option>
                    <option value="female">Female Vocals</option>
                </select>
            </div>
            <div id="select-source">
                <label>Select Source</label>
                <button id="mic-button" class="source-button" title="Mic" onclick="audioUsher.webAudioInit.micInit.toggleMicSource()">Mic</button>
                <!--<button id="sample-button" class="source-button" onclick="audioUsher.webAudioInit.sampleInit.toggleSampleSource()">Sample</button>-->
                <input id="sample-button" class="source-button" title="Select File" type="file" onclick="audioUsher.webAudioInit.sampleInit.toggleSampleSource()" >
                <button id="play-button" class="source-button" title="Play/Stop" onclick="actions.sample.playback()">Play/Stop</button>
            </div>
            <div id="gain-control">
                <label>Gain</label>
                <input type="range" value="0" step="1" min="0" max="12" oninput="actions.limiter.maximize(this.value);">
                <span class="value" id="limiter-maximize-db">0</span> <span class="unit">dB</span>
                <div id="limiter-reduction"></div>
            </div>
            <div id="canvas-controls">
                <label>Canvas Controls</label>
                <button id="autocorrection-button" class="canvas-button active" title="Auto-Correction">Auto-Correction</button>
                <button id="redraw-notes-button" class="canvas-button" title="Redraw Corrected" onclick="drawer.redrawNotesCorrected()">Redraw Corrected</button>
                <button id="redraw-bpm-button" class="canvas-button" title="Redraw on BPM" onclick="drawer.BPMrefresh()">Redraw on BPM</button>
                <button id="clear-button" class="canvas-button" title="Clear" onclick="drawer.clearCanvas()">Clear</button>
                <button id="follow-button" class="canvas-button active" title="Follow">Follow</button>
            </div>
            <div id="output-details" class="panel-heading">
                <label>Output Indicator</label>
                <div id="detector" class="vague">
                    <div class="pitch"><span id="pitch">--</span>Hz</div>
                    <div class="note"><span id="note">--</span></div>   
                    <div id="detune"><span id="detune_amt">--</span><span id="flat">cents ♭</span><span id="sharp">cents ♯</span></div>
                </div>
                <div id="bpm-indicator">
                    <kbd>120 BPM</kbd>
                </div>
            </div>
        </div>
        <!--<button id="sources-toggler">Hide source controls</button>-->
        <div class="output panel panel-default">
            <div id="output-notation" class="panel-body">
                <div id="output-tabs">
                    <ul class="nav nav-tabs">
                        <li><a href="#pianoRoll" id="pianoRoll-tab" >MIDI</a></li>
                        <li><a href="#score" id="score-tab">Score</a></li>
                    </ul>
                    <div class="notation">
                        <div id="pianoRoll">
                            <div>                                               <!-- second div for double scroll-->
                                <canvas class="pianoRollBackground">
                                    <script>
                                        var pianoRollCanvas = document.getElementsByClassName("pianoRollBackground")[0];
                                        var pianoRollContext = pianoRollCanvas.getContext('2d');
                                        pianoRollCanvas.width = window.innerWidth * 4;
                                        //canvas4.width = 5000;
                                        pianoRollCanvas.height = 1000;
                                    </script>
                                </canvas>
                            </div>
                        </div>
                        <div id="score">
                            <div>                                               <!-- second div for double scroll-->
                                <canvas class="vexflowStave">
                                    <script>
                                        var scoreCanvas = document.getElementsByClassName("vexflowStave")[0];
                                        scoreCanvas.width = window.innerWidth;
                                        scoreCanvas.height = 4000;
                                        var vexflowRenderer = new Vex.Flow.Renderer(scoreCanvas, Vex.Flow.Renderer.Backends.CANVAS); // first create a rendering context from the canvas element. This rendering context gives VexFlow a consistent 2D drawing interface, which is modeled on HTML5 Canvas.
                                        var scoreContext = vexflowRenderer.getContext();
                                        drawer.drawStaves();
                                    </script>
                                </canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
